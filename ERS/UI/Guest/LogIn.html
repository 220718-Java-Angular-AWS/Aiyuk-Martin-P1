<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Reimbursement Page</title>
    </head>
    <body>
        <h1>Welcome, Please Log in to continue</h1>
            <h2>Log In</h2>
                <label>Enter Username: </label>
                <input type="text" placeholder="Enter Username" id="credentials" required>
                <br><br>
                <label>Enter Password: </label>
                <input type="password" placeholder="Enter Password" id="password" required>
                <br><br>
                <button type="submit" id="login" onclick="logInEmployeeUser()">Log In</button>
                <button type="submit" onclick="registerEmployeeUser()">Register New EmployeeUser</button>
           
    </body>
    <script>
        async function logInEmployee() {
            emial = document.getElementById("email").value;
            password = document.getElementById("password").value;
            let url = 'http://localhost:8080/ERS/reimbursement?user_id=' + email + '& password=' + password;
            let response = await fetch(url, {
                method: 'GET',
                headers:{
                    'Content-Type': 'application/jason; charset=utf-8'
                }
            });
            
            if(response.status == 200){
                let employee = await response.json();
                if(localStorage.getItem == null){
                    document.getElementById("login").addEventListener("click", function() {
                    window.localStorage.setItem('userId', employeeuser.userId);
                    localStorage.setItem('admin', employeeuser.manager);
                });
                }else{
                    localStorage.getItem('userId');
                    localStorage.getItem('manager');
                    localStorage.setItem('userId', employeeuser.userId);
                    localStorage.setItem('manager', employeeuser.manager);
                }
                
                alert("Welcome " + employee.firstName + " " + employee.lastName);
                if(employee.admin == true){
                    location.href = 'file:///C:\Users\AirTino\Documents\Aiyuk-Martin-P1\ERS\UI\EmployeeUser/mainMenu.html';
                }else{
                    location.href = 'file:///C:\Users\AirTino\Documents\Aiyuk-Martin-P1\ERS\UI\EmployeeUser/mainMenu.html';
                }
                
            }
            
            
        }
        
        async function registerEmployee() {
            location.href = 'file:///C:\Users\AirTino\Documents\Aiyuk-Martin-P1\ERS\UI\EmployeeUser/mainMenu.html';
        }
</script>        
</html>